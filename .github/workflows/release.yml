name: 'Tag and Deploy Site'

on:
  push:
    paths:
      - .github/workflows/release.yml


jobs:
  tag_site:
    name: Tag Site
    uses: ./.github/workflows/tag_release.yml
    with:
      repo_ref: main
    secrets: inherit
  test_outputs:
    name: Verifying Output
    runs-on: ubuntu-latest
    needs: tag_site
    steps:
      - name: Verify output
        env:
          OUTPUT: ${{ needs.tag_site.outputs.next_rev }}
          TEST_ONE:  ${{ needs.tag_site.outputs.test_one }}
          TEST_TWO:  ${{ needs.tag_site.outputs.test_two }}
          TEST_THREE:  ${{ needs.tag_site.outputs.test_three }}
        run: |
          echo $OUTPUT
          echo $TEST_ONE
          echo $TEST_TWO
          echo $TEST_THREE
